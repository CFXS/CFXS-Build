set_c_compiler("arm-none-eabi-gcc", "11")
set_cpp_compiler("arm-none-eabi-g++", "20")
set_asm_compiler("arm-none-eabi-gcc")
set_linker("arm-none-eabi-ld")

-- set_c_compiler("iccarm", "11")
-- set_cpp_compiler("iccarm", "14")
-- set_asm_compiler("iasmarm")
-- set_linker("ilinkarm")

local test_project = create_executable("CFXS-Build-Test")
test_project:set_linker_script("./LinkerScript.ld")

function import_module()
    import("./modules/Module_A")
end

import_module()

import("/mnt/d/cfxs_ext_module")

local sources = {
    "./src/**.c",            -- current dir + recursive search
    "./src/main.cpp",        -- single file
    "!makefsdata.c",         -- full path matching exclude (path.contains(exclude_entry))
}

test_project:add_sources(sources)
test_project:add_include_directories("local", {
    "./src"
})
test_project:add_compile_definitions("forward", {
    "BUILD_SOMETHING"
})
test_project:add_compile_options("forward", {
    "-O3",
})
