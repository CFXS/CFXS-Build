set_c_compiler("arm-none-eabi-gcc", "11")
set_cpp_compiler("arm-none-eabi-g++", "20")
set_asm_compiler("arm-none-eabi-gcc")
set_linker("arm-none-eabi-ld")

-- set_c_compiler("iccarm", "11")
-- set_cpp_compiler("iccarm", "14")
-- set_asm_compiler("iasmarm")
-- set_linker("ilinkarm")

local test_project = create_executable("CFXS-Build-Test")
test_project:set_linker_script("./LinkerScript.ld")

local sources = {
    "./src/**.c",            -- current dir + recursive search
    "./src/Module_A/**.cpp", -- current dir + recursive search
    "./src/Module_B/**.cpp", -- current dir + recursive search
    -- "./src/Module_B2/**.cpp", -- current dir + recursive search
    -- "./src/Module_B3/**.cpp", -- current dir + recursive search
    "./src/Module_C/*.cpp", -- current dir + recursive search
    "./src/main.cpp",        -- single file
    "!makefsdata.c",         -- full path matching exclude (path.contains(exclude_entry))
}

test_project:add_sources(sources)
test_project:add_include_directories("local", {
    "./src"
})
test_project:add_compile_definitions("forward", {
    "CFXS"
})
test_project:add_compile_options("forward", {
    "-O3",
})

